<?php

namespace XPPWOTS;

if (! defined('ABSPATH')) {
	exit;
}

final class I18n
{
	private static array $map = [
		'ar' => [
			'plugin' => 'الإضافة',
			'dashboard' => 'لوحة تحكم',
			'settings' => 'الإعدادات',
			'records' => 'السجلات',
			'help' => 'مساعدة',
			'save' => 'حفظ',
			'saved_ok' => 'تم الحفظ بنجاح',
			'delete' => 'حذف',
			'deleted' => 'تم الحذف',
			'edit' => 'تعديل',
			'close' => 'إغلاق',
			'actions' => 'إجراءات',
			'search' => 'تحديث',
			'status' => 'الحالة',
			'processing' => 'جارٍ المعالجة…',
			'success' => 'تم بنجاح',
			'failed' => 'فشل',
			'timeout' => 'انتهت المهلة',
			'copy' => 'نسخ',
			'copied' => 'تم النسخ',
			'field_url' => 'رابط الخدمة',
			'field_token' => 'رمز/سر اختياري',
			'receive_mode' => 'وضع الاستقبال',
			'callback' => 'استدعاء',
			'polling' => 'استطلاع',
			'callback_ep' => 'مسار الاستدعاء',
			'poll_interval' => 'فاصل الاستطلاع (ث)',
			'timeout_sec' => 'مهلة الطلب (ث)',
			'page_desc_dashboard' => 'الحصول على أكثر التغريدات جذبًا من صاحب الحساب على منصة X.',
			'page_desc_records' => 'قائمة التغريدات التي تم حفظها من لوحة التحكم.',
			'page_desc_settings' => 'احفظ إعدادات الخدمة العامة هنا.',
			'page_desc_help' => 'مساعدة عامة ووصف للصفحات ونقاط الربط.',
			'msg_generic_error' => 'حدث خطأ غير متوقع.',
			'msg_network_error' => 'خطأ في الشبكة.',
			'tw_heading' => 'أدخل إسم المستخدم على منصة X',
			'tw_username' => 'اسم المستخدم (بدون @)',
			'tw_fetch' => 'جلب التغريدات',
			'tw_loading' => 'جارِ الجلب…',
			'tw_empty' => 'لا توجد تغريدات',
			'tw_error' => 'تعذر الجلب. حاول مجددًا.',
			'tw_retry' => 'إعادة المحاولة',
			'tw_open' => 'فتح التغريدة',
			'tw_views' => 'المشاهدات',
			'tw_replies' => 'الردود',
			'tw_retweets' => 'إعادات التغريد',
			'tw_likes' => 'الإعجابات',
			'tw_bookmarks' => 'العلامات',
			'tw_profile_bio' => 'نبذة',
			'field_profile_url' => 'رابط Webhook للملف الشخصي',
			'field_tweets_url'  => 'رابط Webhook للتغريدات',
			'cpt_tweets' => 'تغريدات',
			'cpt_tweet' => 'تغريدة',
			'cpt_add_new' => 'إضافة تغريدة',
			'cpt_add_new_item' => 'إضافة تغريدة',
			'cpt_edit_item' => 'تعديل تغريدة',
			'cpt_new_item' => 'تغريدة جديدة',
			'cpt_view_item' => 'عرض التغريدة',
			'cpt_search_items' => 'بحث في التغريدات',
			'cpt_not_found' => 'لا توجد تغريدات',
			'cpt_not_found_trash' => 'لا توجد تغريدات في سلة المهملات',
			'cpt_all_items' => 'كل التغريدات',
			'cpt_menu_name' => 'تغريدات',
			'cpt_box_title' => 'بيانات التغريدة',
			'cpt_field_handle' => 'الحساب',
			'cpt_field_tweet_id' => 'معرّف التغريدة',
			'cpt_field_url' => 'الرابط',
			'cpt_field_full_text' => 'النص',
			'cpt_field_created_at' => 'تاريخ النشر',
			'cpt_field_likes' => 'الإعجابات',
			'cpt_field_retweets' => 'إعادات التغريد',
			'cpt_field_replies' => 'الردود',
			'cpt_field_views' => 'المشاهدات',
			'cpt_field_bookmarks' => 'العلامات',
			'cpt_field_fetched_at' => 'تاريخ الحفظ',
			'cpt_col_title' => 'العنوان',
			'cpt_col_handle' => 'الحساب',
			'cpt_col_metrics' => 'الأرقام',
			'cpt_col_dates' => 'التواريخ',
			'cpt_open' => 'فتح',
			'tw_save' => 'حفظ النتائج',
			'confirm_delete' => 'هل تريد حذف كل التغريدات للحساب %s؟ لا يمكن التراجع عن هذه العملية.',
			'col_name'    => 'الاسم',
			'col_tweets'  => 'التغريدات',
			'col_latest'  => 'أحدث تاريخ',
			'col_totals'  => 'التفاعل الإجمالي',
			'show'        => 'عرض',
			'hide'        => 'إخفاء',
			'delete'      => 'حذف',
			'last_posted' => 'آخر نشر',
			'last_saved'  => 'آخر حفظ',
			'help' => 'المساعدة',
			'help_intro' => 'تشرح هذه الصفحة تشغيل الإضافة من الألف إلى الياء: المتطلبات، الإعداد، الجلب، الحفظ، استعراض السجلات، والأخطاء الشائعة.',
			'help_title_overview' => 'نظرة عامة',
			'help_overview' => 'تعرض الإضافة أكثر المنشورات تفاعلًا لحساب معيّن. أدخل اسم المستخدم بدون @. تُستخدم نقطتا ربط: واحدة للملف الشخصي وأخرى للمنشورات. يمكنك حفظ النتائج في السجلات للاطلاع لاحقًا.',
			'help_title_requirements' => 'المتطلبات',
			'help_req_1' => 'يجب أن يعيد رابط الملف الشخصي مصفوفة في المستوى الأعلى.',
			'help_req_2' => 'يجب أن يعيد رابط التغريدات/المنشورات مصفوفة في المستوى الأعلى.',
			'help_req_3' => 'يجب أن يقبل الرابطان الاستعلام ?handle=USERNAME حيث USERNAME بدون @.',
			'help_rsp_profile' => 'شكل استجابة الملف الشخصي',
			'help_rsp_posts' => 'شكل استجابة التغريدات/المنشورات',
			'help_rsp_note' => 'يجب أن تكون الاستجابة JSON صافيًا (مصفوفة في الأعلى) بلا نص محيط.',
			'help_title_quickstart' => 'طريقة استخدام سريعة',
			'help_qs_settings'      => 'افتح صفحة «الإعدادات»، ثم املأ الحقول التالية بالترتيب:',
			'help_qs_profile'       => 'رابط واجهة الملف: ويبهوك يُرجِع مصفوفة عليا ‎[ { name, screen_name, description, image_url } ] ويقبل ‎?handle=USERNAME (بدون ‎@).',
			'help_qs_posts'         => 'رابط واجهة التغريدات: ويبهوك يُرجِع مصفوفة عليا، داخل العنصر الأول مفتاح ‎tweets كمصفوفة؛ ويقبل ‎?handle=USERNAME (بدون ‎@).',
			'help_qs_token'         => 'الرمز (اختياري): اتركه فارغًا إن لم تستخدم توكين.',
			'help_qs_timeout'       => 'المهلة والحد الأقصى (إن وُجدا): ثواني الانتظار وأقصى عدد للعناصر المعروضة.',
			'help_qs_save'          => 'اضغط «حفظ» لتطبيق الإعدادات.',
			'help_qs_dashboard'     => 'اذهب إلى «لوحة التحكم»:',
			'help_qs_enter'         => 'اكتب اسم المستخدم بدون ‎@ (مثال: WailSolaiman).',
			'help_qs_fetch'         => 'اضغط «جلب التغريدات» لبدء التحميل.',
			'help_qs_states'        => 'قد تظهر هذه الحالات:',
			'help_qs_loading'       => 'جارِ الجلب… — يجري الاتصال بالواجهة.',
			'help_qs_empty'         => 'لا توجد تغريدات — الاستجابة صحيحة لكن القائمة فارغة.',
			'help_qs_error'         => 'تعذر الجلب — تحقّق من روابط الويبهوك أو صيغة JSON ثم اضغط «إعادة المحاولة».',
			'help_qs_store'         => 'بعد ظهور النتائج اضغط «حفظ النتائج» لإرسال البيانات إلى «السجلات».',
			'help_title_records' => 'السجلات',
			'help_records_1' => 'كل حساب محفوظ يظهر كسطر واحد: الاسم/المعرّف، العدد، أحدث تاريخ، وإجمالي التفاعل.',
			'help_records_2' => 'زر عرض/إخفاء لفتح شبكة بطاقات متجاوبة.',
			'help_records_3' => 'المحتوى للقراءة فقط؛ يمكنك حذف الحساب بالكامل.',
			'help_records_4' => 'زر فتح داخل البطاقة يذهب للرابط الأصلي في تبويب جديد.',
			'help_title_settings_deep' => 'تفاصيل الإعدادات',
			'help_set_profile' => 'رابط الملف يعيد مصفوفة؛ نستخدم العنصر الأول.',
			'help_set_posts' => 'رابط التغريدات يعيد مصفوفة؛ نستخدم العنصر الأول ومصفوفة tweets بداخله.',
			'help_set_token' => 'الرمز اختياري.',
			'help_set_timeout' => 'مهلة الشبكة.',
			'help_set_max' => 'إن وُجد حد أقصى للعناصر فسيتم قصّ العرض إليه.',
			'help_title_tips' => 'نصائح وحلول سريعة',
			'help_tip_empty' => 'قائمة فارغة: تأكد من وجود tweets داخل المصفوفة العليا وأن اسم المستخدم بدون @.',
			'help_tip_error' => 'خطأ: تحقق من الروابط في الإعدادات ثم DevTools → Network → Preview ويجب أن تبدأ المعاينة بـ [.',
			'help_tip_cors' => 'أخطاء CORS: فعّل Access-Control-Allow-Origin على مضيف الويبهوك أو اختبر من نفس النطاق.',
			'help_tip_time' => 'يتم تنسيق التاريخ تلقائيًا حسب لغة لوحة ووردبريس.',
			'help_title_callback' => 'مسار النداء العكسي',
			'help_title_privacy' => 'الخصوصية',
			'help_privacy' => 'لا ترسل الإضافة بيانات إلى طرف ثالث بذاتها. أي تبادل يتم فقط مع روابط الويبهوك التي تحددها.',
			'developer' => 'عن المطوّر',
			'about_dev'            => 'عن المطوّر',
			'page_desc_developer'  => 'نبذة موجزة عن المطوّر وروابط مفيدة للمزيد من الأدلة والموارد.',
			'dev_name'             => 'وائل سليمان',
			'dev_bio'              => 'أساعد الأفراد وأصحاب الأعمال على إنشاء مواقع وتطبيقات تجمع بين التقنية، الأتمتة، والذكاء الاصطناعي لتوفير الوقت وزيادة الكفاءة. أحمل شهادة بكالوريوس في هندسة البرمجيات من جامعة لوبيك للتكنولوجيا بألمانيا (2013)، ومع خبرة تتجاوز 12 عامًا في تطوير الويب.',
			'read_more'            => 'لقراءة المزيد',
			'portfolio_title'   => 'معرض الأعمال',
			'portfolio_desc'    => 'مجموعة من مواقع الويب قمت بتطويرها عن طريق WordPress لتناسب مجالات متنوعة، مثل العيادات، المكاتب، والاستوديوهات، بالإضافة إلى مواقع شخصية تم تصميمها باستخدام Framer.',
			'portfolio_button'  => 'إلى المعرض',
			'useful_links'         => 'روابط مفيدة',
			'link_api_keys'        => '🔐 دليل عملي: إنشاء مفاتيح API وربطها بمنصة n8n',
			'link_hostinger_install' => '🛠️ دليل تثبيت n8n على استضافة Hostinger',
			'link_local_install'   => '🛠️ دليل تثبيت وتشغيل n8n مجاناً على جهازك',
			'link_hostinger_update' => '🛠️ كيفية تحديث n8n على Hostinger',
			'open_guides'          => 'اضغط هنا للقراءة',
		],
		'en' => [
			'plugin' => 'Plugin',
			'dashboard' => 'Dashboard',
			'settings' => 'Settings',
			'records' => 'Records',
			'help' => 'Help',
			'save' => 'Save',
			'saved_ok' => 'Saved successfully',
			'delete' => 'Delete',
			'deleted' => 'Deleted',
			'edit' => 'Edit',
			'close' => 'Close',
			'actions' => 'Actions',
			'search' => 'Refresh',
			'status' => 'Status',
			'processing' => 'Processing…',
			'success' => 'Success',
			'failed' => 'Failed',
			'timeout' => 'Timeout',
			'copy' => 'Copy',
			'copied' => 'Copied',
			'field_url' => 'Endpoint URL',
			'field_token' => 'Token/Secret (optional)',
			'receive_mode' => 'Receive Mode',
			'callback' => 'Callback',
			'polling' => 'Polling',
			'callback_ep' => 'Callback Path',
			'poll_interval' => 'Polling Interval (s)',
			'timeout_sec' => 'Timeout (s)',
			'page_desc_dashboard' => 'Fetch most engaging tweets from an X account.',
			'page_desc_records' => 'List of tweets saved from the dashboard.',
			'page_desc_settings' => 'Persist general service settings here.',
			'page_desc_help' => 'General help and page/route descriptions.',
			'msg_generic_error' => 'An unexpected error occurred.',
			'msg_network_error' => 'Network error.',
			'tw_heading' => 'Enter X username',
			'tw_username' => 'Username (without @)',
			'tw_fetch' => 'Fetch tweets',
			'tw_loading' => 'Loading…',
			'tw_empty' => 'No tweets',
			'tw_error' => 'Could not fetch. Try again.',
			'tw_retry' => 'Retry',
			'tw_open' => 'Open Tweet',
			'tw_views' => 'Views',
			'tw_replies' => 'Replies',
			'tw_retweets' => 'Retweets',
			'tw_likes' => 'Likes',
			'tw_bookmarks' => 'Bookmarks',
			'tw_profile_bio' => 'Bio',
			'field_profile_url' => 'Profile Webhook URL',
			'field_tweets_url'  => 'Tweets Webhook URL',
			'cpt_tweets' => 'Tweets',
			'cpt_tweet' => 'Tweet',
			'cpt_add_new' => 'Add Tweet',
			'cpt_add_new_item' => 'Add Tweet',
			'cpt_edit_item' => 'Edit Tweet',
			'cpt_new_item' => 'New Tweet',
			'cpt_view_item' => 'View Tweet',
			'cpt_search_items' => 'Search Tweets',
			'cpt_not_found' => 'No tweets found',
			'cpt_not_found_trash' => 'No tweets found in Trash',
			'cpt_all_items' => 'All Tweets',
			'cpt_menu_name' => 'Tweets',
			'cpt_box_title' => 'Tweet Data',
			'cpt_field_handle' => 'Handle',
			'cpt_field_tweet_id' => 'Tweet ID',
			'cpt_field_url' => 'URL',
			'cpt_field_full_text' => 'Text',
			'cpt_field_created_at' => 'Created At',
			'cpt_field_likes' => 'Likes',
			'cpt_field_retweets' => 'Retweets',
			'cpt_field_replies' => 'Replies',
			'cpt_field_views' => 'Views',
			'cpt_field_bookmarks' => 'Bookmarks',
			'cpt_field_fetched_at' => 'Fetched At',
			'cpt_col_title' => 'Title',
			'cpt_col_handle' => 'Handle',
			'cpt_col_metrics' => 'Metrics',
			'cpt_col_dates' => 'Dates',
			'cpt_open' => 'Open',
			'tw_save' => 'Save results',
			'confirm_delete' => 'Delete all tweets for %s? This action cannot be undone.',
			'col_name'    => 'Name',
			'col_tweets'  => 'Tweets',
			'col_latest'  => 'Latest',
			'col_totals'  => 'Total engagement',
			'show'        => 'Show',
			'hide'        => 'Hide',
			'delete'      => 'Delete',
			'last_posted' => 'Last posted',
			'last_saved'  => 'Last saved',
			'help' => 'Help',
			'help_intro' => 'This page explains how to set up the plugin end-to-end: requirements, configuration, fetching, saving, browsing records, and common errors.',
			'help_title_overview' => 'Overview',
			'help_overview' => 'The plugin displays the most engaging posts for a given handle. Enter the username without @. Two webhooks are used: one for profile data and one for posts. You can save results into Records for later viewing.',
			'help_title_requirements' => 'Requirements',
			'help_req_1' => 'Profile webhook must return a top-level array.',
			'help_req_2' => 'Posts webhook must return a top-level array.',
			'help_req_3' => 'Both endpoints must accept ?handle=USERNAME where USERNAME has no @.',
			'help_rsp_profile' => 'Profile response shape',
			'help_rsp_posts' => 'Posts response shape',
			'help_rsp_note' => 'Response must be pure JSON (array at the top) with no surrounding text.',
			'help_title_quickstart' => 'Quick start',
			'help_qs_settings'      => 'Open the Settings page and fill these fields in order:',
			'help_qs_profile'       => 'Profile endpoint URL: webhook returning a top-level array [ { name, screen_name, description, image_url } ] and accepting ?handle=USERNAME (without @).',
			'help_qs_posts'         => 'Posts endpoint URL: webhook returning a top-level array whose first item has a tweets array; accepts ?handle=USERNAME (without @).',
			'help_qs_token'         => 'Token (optional): leave empty if not used.',
			'help_qs_timeout'       => 'Timeout and Max (if present): request timeout in seconds and the maximum number of items to display.',
			'help_qs_save'          => 'Click Save to apply settings.',
			'help_qs_dashboard'     => 'Go to Dashboard:',
			'help_qs_enter'         => 'Enter the username without @ (e.g., WailSolaiman).',
			'help_qs_fetch'         => 'Click Fetch Tweets to start.',
			'help_qs_states'        => 'You may see these states:',
			'help_qs_loading'       => 'Loading… — contacting the endpoint.',
			'help_qs_empty'         => 'No posts — response is valid but the list is empty.',
			'help_qs_error'         => 'Fetch failed — verify webhook URLs/JSON and click Retry.',
			'help_qs_store'         => 'Once results appear, click Save Results to send them to Records.',
			'help_title_records' => 'Records',
			'help_records_1' => 'Each saved handle appears as one row: name/handle, count, latest date, and total engagement.',
			'help_records_2' => 'Use Show/Hide to expand a responsive grid of posts.',
			'help_records_3' => 'Content is read-only; you can delete a handle entirely.',
			'help_records_4' => 'Open inside each card goes to the original post in a new tab.',
			'help_title_settings_deep' => 'Settings details',
			'help_set_profile' => 'Profile endpoint URL returns an array; the first element is used.',
			'help_set_posts' => 'Posts endpoint URL returns an array; use the first element and its tweets array.',
			'help_set_token' => 'Token is optional.',
			'help_set_timeout' => 'Network timeout.',
			'help_set_max' => 'If max items is present, the UI limits display to that number.',
			'help_title_tips' => 'Tips & quick fixes',
			'help_tip_empty' => 'Empty list: ensure the top-level array includes a tweets field and the handle has no @.',
			'help_tip_error' => 'Error: verify endpoints in Settings and inspect DevTools → Network → Preview. The preview must start with [.',
			'help_tip_cors' => 'CORS errors: configure Access-Control-Allow-Origin on your webhook host or test from the same origin.',
			'help_tip_time' => 'Dates are formatted automatically based on your WordPress admin language.',
			'help_title_callback' => 'Callback path',
			'help_title_privacy' => 'Privacy',
			'help_privacy' => 'The plugin does not send data to third parties by itself. All exchanges happen only with the webhook URLs you configure.',
			'developer' => 'About the Developer',
			'about_dev'            => 'About the Developer',
			'page_desc_developer'  => 'A brief introduction to the developer with helpful guides and resources.',
			'dev_name'             => 'Wail Solaiman',
			'dev_bio'              => 'I help individuals and business owners build sites and apps that combine technology, automation, and AI to save time and boost efficiency. I hold a B.Sc. in Software Engineering from Lübeck University of Applied Sciences, Germany (2013), with 12+ years of web development experience.',
			'read_more'            => 'Read more',
			'portfolio_title'   => 'Portfolio',
			'portfolio_desc'    => 'A selection of websites I built with WordPress for various domains—clinics, offices, studios—and personal sites designed with Framer.',
			'portfolio_button'  => 'View Portfolio',
			'useful_links'         => 'Useful Links',
			'link_api_keys'        => '🔐 Practical guide: Create API keys and connect them to n8n',
			'link_hostinger_install' => '🛠️ Guide: Install n8n on Hostinger',
			'link_local_install'   => '🛠️ Guide: Install & run n8n locally for free',
			'link_hostinger_update' => '🛠️ How to update n8n on Hostinger',
			'open_guides'          => 'Open guides',
		],
	];

	public static function init(): void {}

	public static function lang(): string
	{
		$loc = function_exists('get_user_locale') ? get_user_locale() : (function_exists('get_locale') ? get_locale() : 'en');
		$loc = strtolower((string)$loc);
		return (strpos($loc, 'ar') === 0) ? 'ar' : 'en';
	}

	public static function t(string $key): string
	{
		$l = self::lang();
		return isset(self::$map[$l][$key]) ? self::$map[$l][$key] : '';
	}

	public static function js_map(): array
	{
		$l = self::lang();
		return self::$map[$l];
	}
}
